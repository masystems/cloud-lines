{% extends 'home_base.html' %}
{% load static %}
{% block content %}

<style>
    .slider-element {
    top: -100px;
    bottom: -100px;
    height: 100px !important;
    margin-bottom: -100px;
}
</style>

<section id="slider" class="slider-element">
	<div class="cloud-wrap">
		<div class="c1"><div class="cloud"></div></div>
		<div class="c2"><div class="cloud"></div></div>
		<div class="c3"><div class="cloud"></div></div>
		<div class="c4"><div class="cloud"></div></div>
		<div class="c5"><div class="cloud"></div></div>
	</div>
</section><!-- #slider end -->

<!-- Page Title
============================================= -->
<section id="page-title">

	<div class="container clearfix">
		<h1>Contact</h1>
		<span>{{ content.sub_title }}</span>
		<ol class="breadcrumb">
			<li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a></li>
			<li class="breadcrumb-item active" aria-current="page">Contact</li>
		</ol>
	</div>

		</section><!-- #page-title end -->
<!-- Content
============================================= -->
<!-- Contact Form & Map Overlay Section
		============================================= -->
<section id="content">

    <div class="container clearfix content-wrap">

        <!-- Contact Form Overlay
        ============================================= -->
        <div id="contact-form-overlay">

            <div class="fancy-title title-dotted-border">
                <h3>Send us an Email</h3>
            </div>

            <!-- Contact Form
            ============================================= -->
            <div id="contactForm" data-wow-duration="1s">
                <div class="col_half">
                    <label for="name">Name <small>*</small></label>
                    <input type="text" id="name" name="name" value="" class="sm-form-control required" required/>
                </div>

                <div class="col_half col_last">
                    <label for="email">Email <small>*</small></label>
                    <input type="email" id="email" name="email" value="" class="required email sm-form-control" required/>
                </div>

                <div class="clear"></div>

                <div class="col_half">
                    <label for="phone">Phone</label>
                    <input type="text" id="phone" name="phone" value="" class="sm-form-control" />
                </div>

                <div class="col_half col_last">
                    <label for="service">Services</label>
                    <select id="service" name="service" class="sm-form-control">
                        <option value="">-- Select One --</option>
                        {% for service in services %}
                            <option value="{{ service }}">{{ service }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="clear"></div>

                <div class="col_full">
                    <label for="subject">Subject <small>*</small></label>
                    <input type="text" id="subject" name="subject" value="" class="required sm-form-control" required />
                </div>

                <div class="col_full">
                    <label for="message">Message <small>*</small></label>
                    <textarea class="required sm-form-control" id="message" name="message" rows="6" cols="30" required></textarea>
                </div>

                <div class="col_full hidden">
                    <input type="text" id="botcheck" name="botcheck" value="" class="sm-form-control" />
                </div>

                <div class="col_full">
                    <button class="button button-3d" id="contactMessage" type="submit">Send Message</button>
                </div>
            </div>
            <script>
                function validateForm() {
                    $("#contactMessage").validate({

                        rules: {
                            email: {
                                required: true,
                                email: true
                            },
                            mobile: {
                                required: true,
                                number: true,
                                minlength: 10,
                                maxlength: 10
                            }
                        },
                        messages: {
                            email: {
                                required: "Please enter a valid email address.",
                                email: "Invalid Email Address."
                            },
                            mobile: {
                                required: "Please provide a mobile number.",
                                minlength: "Your mobile number must be 10 characters long.",
                                maxlength: "Your mobile number must be 10 characters long.",
                                number: "Please Enter number only."
                            }
                        }
                    });
                    return false;
                }

                $('#contactMessage').click(function () {
                    $.ajax({
                        type: "POST",
                        url: "{% url 'contact' %}",
                        dataType: "json",
                        headers: {'X-CSRFToken': '{{ csrf_token }}'},
                        data: {
                            "name": $('#name').val(),
                            "email": $('#email').val(),
                            "phone": $('#phone').val(),
                            "service": $('#service').val(),
                            "subject": $('#subject').val(),
                            "message": $('#message').val(),
                        },
                        beforeSend: function() {
                            if (validateForm()) {
                                $('#contactForm').html('<div class="d-flex flex-column align-items-center justify-content-center ">\
                                                            <div id="spinner" class="spinner-border text-info" style="width: 6rem; height: 6rem;" role="status"></div>\
                                                            <div id="spinnerText" class="row">\
                                                                <p><strong>Sending Message</strong></p>\
                                                            </div>\
                                                        </div>');
                            } else {
                                // don't send form
                                return false;
                            }
                        },

                        success: function (data) {
                            $('spinner').addClass('d-none');
                            $('spinnerText').addClass('d-none');
                            $('#contactForm').html('<h5 class="text-center">' + data.message + '</h5>').fadeIn(3000);
                        },
                        error: function (xhr, textStatus, error) {
                            $('#contactForm').html('<h5 class="text-center">Something went wrong, but we are working on it!</h5>').fadeIn(3000);
                        },
                    });
                });
            </script>
        </div><!-- Contact Form Overlay End -->
    </div>

{% endblock %}
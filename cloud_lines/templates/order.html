
{% extends 'home_base.html' %}
{% load static %}
{% block head %}
	<!--	STRIPE-->
	<script src="https://js.stripe.com/v3/"></script>


{% endblock %}
{% block content %}
<style>
    .slider-element {
    top: -100px;
    bottom: -100px;
    height: 100px !important;
    margin-bottom: -100px;
}


label {
  height: 35px;
  position: relative;
  color: #8798AB;
  display: block;
  margin-top: 30px;
  margin-bottom: 20px;
}

label > span {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  font-weight: 300;
  line-height: 32px;
  color: #8798AB;
  border-bottom: 1px solid #586A82;
  transition: border-bottom-color 200ms ease-in-out;
  cursor: text;
  pointer-events: none;
}

label > span span {
  position: absolute;
  top: 0;
  left: 0;
  transform-origin: 0% 50%;
  transition: transform 200ms ease-in-out;
  cursor: text;
}

label .field.is-focused + span span,
label .field:not(.is-empty) + span span {
  transform: scale(0.68) translateY(-36px);
  cursor: default;
}

label .field.is-focused + span {
  border-bottom-color: #34D08C;
}

.field {
  background: transparent;
  font-weight: 300;
  border: 0;
  color: white;
  outline: none;
  cursor: text;
  display: block;
  width: 100%;
  line-height: 32px;
  padding-bottom: 3px;
  transition: opacity 200ms ease-in-out;
}

.field::-webkit-input-placeholder { color: #8898AA; }
.field::-moz-placeholder { color: #8898AA; }

/* IE doesn't show placeholders when empty+focused */
 .field:-ms-input-placeholder { color: #424770; }

.field.is-empty:not(.is-focused) {
  opacity: 0;
}

button {
  float: left;
  display: block;
  background: #34D08C;
  color: white;
  border-radius: 2px;
  border: 0;
  margin-top: 20px;
  font-size: 19px;
  font-weight: 400;
  width: 100%;
  height: 47px;
  line-height: 45px;
  outline: none;
}

button:focus {
  background: #24B47E;
}

button:active {
  background: #159570;
}

.outcome {
  float: left;
  width: 100%;
  padding-top: 8px;
  min-height: 20px;
  text-align: center;
}

.success, .error {
  display: none;
  font-size: 15px;
}

.success.visible, .error.visible {
  display: inline;
}

.error {
  color: #E4584C;
}

.success {
  color: #34D08C;
}

.success .token {
  font-weight: 500;
  font-size: 15px;
}

</style>

<section id="slider" class="slider-element">
	<div class="cloud-wrap">
		<div class="c1"><div class="cloud"></div></div>
		<div class="c2"><div class="cloud"></div></div>
		<div class="c3"><div class="cloud"></div></div>
		<div class="c4"><div class="cloud"></div></div>
		<div class="c5"><div class="cloud"></div></div>
	</div>
</section><!-- #slider end -->

<!-- Page Title
============================================= -->
<section id="page-title">

	<div class="container clearfix">
		<h1>Order Service</h1>
		<span>Full in your details below and select a service</span>
		<ol class="breadcrumb">
			<li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a></li>
			<li class="breadcrumb-item active" aria-current="page">Order</li>
		</ol>
	</div>

		</section><!-- #page-title end -->
<!-- Content
============================================= -->
<section id="content">

	<div class="content-wrap">

		<div class="container clearfix">

			<div id="processTabs">
				<ul class="process-steps bottommargin clearfix">
					<li>
						<a href="#ptab1" class="i-circled i-bordered i-alt divcenter">1</a>
						<h5>Select Service</h5>
					</li>
					<li>
						<a href="#ptab2" class="i-circled i-bordered i-alt divcenter">2</a>
						<h5>Enter Billing Info</h5>
					</li>
					<li>
						<a href="#ptab3" class="i-circled i-bordered i-alt divcenter">3</a>
						<h5>Complete Payment</h5>
					</li>
					<li>
						<a href="#ptab4" class="i-circled i-bordered i-alt divcenter">4</a>
						<h5>Order Complete</h5>
					</li>
				</ul>
				<div>

					<div id="ptab1">

						<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Inventore, ipsa, fuga, modi, corporis maiores illum fugit ratione cumque dolores sint obcaecati quod temporibus. Expedita, sapiente, veritatis, impedit iusto labore sed itaque sunt fugiat non quis nihil hic quos necessitatibus officiis mollitia nesciunt neque! Minus, mollitia at iusto unde voluptate repudiandae.</p>
						<form id="serviceForm" name="serviceForm" class="nobottommargin" method="POST">
							<div class="form-row">
								<div class="col-6">
									<label>Service:</label>
									<select class="form-control required" name="checkout-form-service" id="checkout-form-service" required>
										<option value="None">------</option>
										{% for service in services %}
											{% if service.service_name != 'Free' %}
												<option value="{{ service.price_per_month }}" name="{{ service.service_name }}">{{ service.service_name }}</option>
											{% endif %}
										{% endfor %}
									</select>

								</div>
								<div class="col-6">
									<label>Payment Increment:</label>
									<select class="form-control required" name="checkout-form-payment-inc" id="checkout-form-payment-inc" required>
										<option value="None">------</option>
										<option value="Monthly">Monthly</option>
										<option value="Yearly">Yearly</option>
									</select>
								</div>
							</div>

							<div class="table pt-2">
								<table class="table table-striped">
									<thead>
										<tr>
											<th>Service</th>
											<th>Increment</th>
											<th>Total</th>
										</tr>
									</thead>
									<tbody>
										<tr>
											<td id="service">None selected</td>
											<td id="increment">None selected</td>
											<td id="total">£0.00</td>
										</tr>
									</tbody>
								</table>
							</div>
							<script>
								$(document).ready(function(){
									$("#checkout-form-service").add('#checkout-form-payment-inc').change(function(){
										var service = document.getElementById("checkout-form-service");
										var service_cost = service.options[service.selectedIndex].value;
										var service_name = service.options[service.selectedIndex].text;
										var increment = document.getElementById("checkout-form-payment-inc").value;
										var fadeout = 100
										var fadein = 2000

										if (increment == 'Monthly'){

											$("#service").fadeOut(fadeout, function() {
												$("#service").text(service_name).fadeIn(fadein)
											});

											$("#increment").fadeOut(fadeout, function() {
												$("#increment").text(increment).fadeIn(fadein)
											});

											$("#total").fadeOut(fadeout, function() {
												$("#total").text('£' + service_cost + 'p/m').fadeIn(fadein)
											});

										} else if (increment == 'Yearly') {

											$("#service").fadeOut(fadeout, function() {
												$("#service").text(service_name).fadeIn(fadein)
											});

											$("#increment").fadeOut(fadeout, function() {
												$("#increment").text(increment).fadeIn(fadein)
											});

											$("#total").fadeOut(fadeout, function() {
												$("#total").text('£' + service_cost*12 + 'p/y').fadeIn(fadein)
											});

										} else {
									};
								  });
								});


							</script>

							<div id='serviceErrors' class="style-msg errormsg">

							</div>

							<a href="#" id="selectService" class="button button-3d nomargin fright tab-linker">Enter Billing Info &rArr;</a>
							<button id="selectServiceButton" type="button" style="display: none;" class="tab-linker" rel="2"></button>
						</form>
						<script>
							$('#selectService').click( function() {
								$.ajax({
									url: '{% url 'order_service' %}',
									type: 'post',
									dataType: 'text',
									data: $('#serviceForm').serialize(),
									success: function(data) {
										$('#serviceErrors').html('');
										$('#selectServiceButton').click();
									 },
									error: function(jqXHR, textStatus, errorThrown){
										$('#serviceErrors').html('<div class="sb-msg"><i class="icon-remove"></i><strong>Oh snap!</strong> Change your options and try submitting again.</div>');
										console.log('jqXHR:');
										console.log(jqXHR);
										console.log('textStatus:');
										console.log(textStatus);
										console.log('errorThrown:');
										console.log(errorThrown);
									}
								});
							});
						</script>
					</div>
					<div id="ptab2">
						<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nesciunt, deleniti, atque soluta ratione blanditiis maxime at architecto laudantium eius eaque distinctio dolorem voluptatem nam ab molestias velit nemo. Illo, hic.</p>
						<form id="billingForm" name="billingForm" class="nobottommargin" method="POST">
							<div class="col-lg-12">
								<div class="row form-billing">
									<div class="col-6 form-group">
										<label>Name:</label>
										<input type="text" name="checkout-form-billing-name" id="checkout-form-billing-name" class="form-control required" value="{{ user.first_name }} {{ user.last_name }}">
									</div>
									<div class="col-6 form-group">
										<label>Email:</label>
										<input type="email" name="checkout-form-billing-email" id="checkout-form-billing-email" class="form-control required" value="{{ user.email }}">
									</div>
									<div class="col-6 form-group">
										<label>Phone:</label><br>
										<input type="text" name="checkout-form-billing-phone" id="checkout-form-billing-phone" class="form-control required" value="{{ user_detail.phone }}">
									</div>
									<div class="col-6 form-group">
										<label>Country:</label>
										<select class="form-control required" name="checkout-form-billing-country" id="checkout-form-billing-country">
											<option value="AX">&#197;land Islands</option>
											<option value="AF">Afghanistan</option>
											<option value="AL">Albania</option>
											<option value="DZ">Algeria</option>
											<option value="AD">Andorra</option>
											<option value="AO">Angola</option>
											<option value="AI">Anguilla</option>
											<option value="AQ">Antarctica</option>
											<option value="AG">Antigua and Barbuda</option>
											<option value="AR">Argentina</option>
											<option value="AM">Armenia</option>
											<option value="AW">Aruba</option>
											<option value="AU">Australia</option>
											<option value="AT">Austria</option>
											<option value="AZ">Azerbaijan</option>
											<option value="BS">Bahamas</option>
											<option value="BH">Bahrain</option>
											<option value="BD">Bangladesh</option>
											<option value="BB">Barbados</option>
											<option value="BY">Belarus</option>
											<option value="PW">Belau</option>
											<option value="BE">Belgium</option>
											<option value="BZ">Belize</option>
											<option value="BJ">Benin</option>
											<option value="BM">Bermuda</option>
											<option value="BT">Bhutan</option>
											<option value="BO">Bolivia</option>
											<option value="BQ">Bonaire, Saint Eustatius and Saba</option>
											<option value="BA">Bosnia and Herzegovina</option>
											<option value="BW">Botswana</option>
											<option value="BV">Bouvet Island</option>
											<option value="BR">Brazil</option>
											<option value="IO">British Indian Ocean Territory</option>
											<option value="VG">British Virgin Islands</option>
											<option value="BN">Brunei</option>
											<option value="BG">Bulgaria</option>
											<option value="BF">Burkina Faso</option>
											<option value="BI">Burundi</option>
											<option value="KH">Cambodia</option>
											<option value="CM">Cameroon</option>
											<option value="CA">Canada</option>
											<option value="CV">Cape Verde</option>
											<option value="KY">Cayman Islands</option>
											<option value="CF">Central African Republic</option>
											<option value="TD">Chad</option>
											<option value="CL">Chile</option>
											<option value="CN">China</option>
											<option value="CX">Christmas Island</option>
											<option value="CC">Cocos (Keeling) Islands</option>
											<option value="CO">Colombia</option>
											<option value="KM">Comoros</option>
											<option value="CG">Congo (Brazzaville)</option>
											<option value="CD">Congo (Kinshasa)</option>
											<option value="CK">Cook Islands</option>
											<option value="CR">Costa Rica</option>
											<option value="HR">Croatia</option>
											<option value="CU">Cuba</option>
											<option value="CW">Cura&Ccedil;ao</option>
											<option value="CY">Cyprus</option>
											<option value="CZ">Czech Republic</option>
											<option value="DK">Denmark</option>
											<option value="DJ">Djibouti</option>
											<option value="DM">Dominica</option>
											<option value="DO">Dominican Republic</option>
											<option value="EC">Ecuador</option>
											<option value="EG">Egypt</option>
											<option value="SV">El Salvador</option>
											<option value="GQ">Equatorial Guinea</option>
											<option value="ER">Eritrea</option>
											<option value="EE">Estonia</option>
											<option value="ET">Ethiopia</option>
											<option value="FK">Falkland Islands</option>
											<option value="FO">Faroe Islands</option>
											<option value="FJ">Fiji</option>
											<option value="FI">Finland</option>
											<option value="FR">France</option>
											<option value="GF">French Guiana</option>
											<option value="PF">French Polynesia</option>
											<option value="TF">French Southern Territories</option>
											<option value="GA">Gabon</option>
											<option value="GM">Gambia</option>
											<option value="GE">Georgia</option>
											<option value="DE">Germany</option>
											<option value="GH">Ghana</option>
											<option value="GI">Gibraltar</option>
											<option value="GR">Greece</option>
											<option value="GL">Greenland</option>
											<option value="GD">Grenada</option>
											<option value="GP">Guadeloupe</option>
											<option value="GT">Guatemala</option>
											<option value="GG">Guernsey</option>
											<option value="GN">Guinea</option>
											<option value="GW">Guinea-Bissau</option>
											<option value="GY">Guyana</option>
											<option value="HT">Haiti</option>
											<option value="HM">Heard Island and McDonald Islands</option>
											<option value="HN">Honduras</option>
											<option value="HK">Hong Kong</option>
											<option value="HU">Hungary</option>
											<option value="IS">Iceland</option>
											<option value="IN">India</option>
											<option value="ID">Indonesia</option>
											<option value="IR">Iran</option>
											<option value="IQ">Iraq</option>
											<option value="IM">Isle of Man</option>
											<option value="IL">Israel</option>
											<option value="IT">Italy</option>
											<option value="CI">Ivory Coast</option>
											<option value="JM">Jamaica</option>
											<option value="JP">Japan</option>
											<option value="JE">Jersey</option>
											<option value="JO">Jordan</option>
											<option value="KZ">Kazakhstan</option>
											<option value="KE">Kenya</option>
											<option value="KI">Kiribati</option>
											<option value="KW">Kuwait</option>
											<option value="KG">Kyrgyzstan</option>
											<option value="LA">Laos</option>
											<option value="LV">Latvia</option>
											<option value="LB">Lebanon</option>
											<option value="LS">Lesotho</option>
											<option value="LR">Liberia</option>
											<option value="LY">Libya</option>
											<option value="LI">Liechtenstein</option>
											<option value="LT">Lithuania</option>
											<option value="LU">Luxembourg</option>
											<option value="MO">Macao S.A.R., China</option>
											<option value="MK">Macedonia</option>
											<option value="MG">Madagascar</option>
											<option value="MW">Malawi</option>
											<option value="MY">Malaysia</option>
											<option value="MV">Maldives</option>
											<option value="ML">Mali</option>
											<option value="MT">Malta</option>
											<option value="MH">Marshall Islands</option>
											<option value="MQ">Martinique</option>
											<option value="MR">Mauritania</option>
											<option value="MU">Mauritius</option>
											<option value="YT">Mayotte</option>
											<option value="MX">Mexico</option>
											<option value="FM">Micronesia</option>
											<option value="MD">Moldova</option>
											<option value="MC">Monaco</option>
											<option value="MN">Mongolia</option>
											<option value="ME">Montenegro</option>
											<option value="MS">Montserrat</option>
											<option value="MA">Morocco</option>
											<option value="MZ">Mozambique</option>
											<option value="MM">Myanmar</option>
											<option value="NA">Namibia</option>
											<option value="NR">Nauru</option>
											<option value="NP">Nepal</option>
											<option value="NL">Netherlands</option>
											<option value="AN">Netherlands Antilles</option>
											<option value="NC">New Caledonia</option>
											<option value="NZ">New Zealand</option>
											<option value="NI">Nicaragua</option>
											<option value="NE">Niger</option>
											<option value="NG">Nigeria</option>
											<option value="NU">Niue</option>
											<option value="NF">Norfolk Island</option>
											<option value="KP">North Korea</option>
											<option value="NO">Norway</option>
											<option value="OM">Oman</option>
											<option value="PK">Pakistan</option>
											<option value="PS">Palestinian Territory</option>
											<option value="PA">Panama</option>
											<option value="PG">Papua New Guinea</option>
											<option value="PY">Paraguay</option>
											<option value="PE">Peru</option>
											<option value="PH">Philippines</option>
											<option value="PN">Pitcairn</option>
											<option value="PL">Poland</option>
											<option value="PT">Portugal</option>
											<option value="QA">Qatar</option>
											<option value="IE">Republic of Ireland</option>
											<option value="RE">Reunion</option>
											<option value="RO">Romania</option>
											<option value="RU">Russia</option>
											<option value="RW">Rwanda</option>
											<option value="ST">S&atilde;o Tom&eacute; and Pr&iacute;ncipe</option>
											<option value="BL">Saint Barth&eacute;lemy</option>
											<option value="SH">Saint Helena</option>
											<option value="KN">Saint Kitts and Nevis</option>
											<option value="LC">Saint Lucia</option>
											<option value="SX">Saint Martin (Dutch part)</option>
											<option value="MF">Saint Martin (French part)</option>
											<option value="PM">Saint Pierre and Miquelon</option>
											<option value="VC">Saint Vincent and the Grenadines</option>
											<option value="SM">San Marino</option>
											<option value="SA">Saudi Arabia</option>
											<option value="SN">Senegal</option>
											<option value="RS">Serbia</option>
											<option value="SC">Seychelles</option>
											<option value="SL">Sierra Leone</option>
											<option value="SG">Singapore</option>
											<option value="SK">Slovakia</option>
											<option value="SI">Slovenia</option>
											<option value="SB">Solomon Islands</option>
											<option value="SO">Somalia</option>
											<option value="ZA">South Africa</option>
											<option value="GS">South Georgia/Sandwich Islands</option>
											<option value="KR">South Korea</option>
											<option value="SS">South Sudan</option>
											<option value="ES">Spain</option>
											<option value="LK">Sri Lanka</option>
											<option value="SD">Sudan</option>
											<option value="SR">Suriname</option>
											<option value="SJ">Svalbard and Jan Mayen</option>
											<option value="SZ">Swaziland</option>
											<option value="SE">Sweden</option>
											<option value="CH">Switzerland</option>
											<option value="SY">Syria</option>
											<option value="TW">Taiwan</option>
											<option value="TJ">Tajikistan</option>
											<option value="TZ">Tanzania</option>
											<option value="TH">Thailand</option>
											<option value="TL">Timor-Leste</option>
											<option value="TG">Togo</option>
											<option value="TK">Tokelau</option>
											<option value="TO">Tonga</option>
											<option value="TT">Trinidad and Tobago</option>
											<option value="TN">Tunisia</option>
											<option value="TR">Turkey</option>
											<option value="TM">Turkmenistan</option>
											<option value="TC">Turks and Caicos Islands</option>
											<option value="TV">Tuvalu</option>
											<option value="UG">Uganda</option>
											<option value="UA">Ukraine</option>
											<option value="AE">United Arab Emirates</option>
											<option value="GB" selected='selected'>United Kingdom (UK)</option>
											<option value="US">United States (US)</option>
											<option value="UY">Uruguay</option>
											<option value="UZ">Uzbekistan</option>
											<option value="VU">Vanuatu</option>
											<option value="VA">Vatican</option>
											<option value="VE">Venezuela</option>
											<option value="VN">Vietnam</option>
											<option value="WF">Wallis and Futuna</option>
											<option value="EH">Western Sahara</option>
											<option value="WS">Western Samoa</option>
											<option value="YE">Yemen</option>
											<option value="ZM">Zambia</option>
											<option value="ZW">Zimbabwe</option>
										</select>
									</div>
									<div class="col-12 form-group">
										<label>Address Line 1:</label>
										<input type="text" name="checkout-form-billing-add1" id="checkout-form-billing-add1" class="form-control required" value="">
									</div>
									<div class="col-12 form-group">
										<label>Address Line 2:</label>
										<input type="text" name="checkout-form-billing-add2" id="checkout-form-billing-add2" class="form-control required" value="">
									</div>
									<div class="col-12 form-group">
										<label>City:</label>
										<input type="text" name="checkout-form-billing-city" id="checkout-form-billing-city" class="form-control required" value="">
									</div>
									<div class="col-12 form-group">
										<label>Post Code:</label>
										<input type="text" name="checkout-form-billing-post-code" id="checkout-form-billing-post-code" class="form-control required" value="">
									</div>

								</div>
							</div>
						</form>


						<div id='billingErrors' class="style-msg errormsg">

							</div>
						<div class="line"></div>
						<a href="#" class="button button-3d nomargin tab-linker" rel="1">Previous</a>
						<a href="#" id="selectBilling" class="button button-3d nomargin fright" >Complete Payment</a>
						<button id="selectBillingButton" type="button" style="display: none;" class="tab-linker" rel="3"></button>

						<script>
							$('#selectBilling').click( function() {
								$.ajax({
									url: '{% url 'order_billing' %}',
									type: 'post',
									dataType: 'text',
									data: $('#billingForm').serialize(),
									success: function(data) {
										$('#billingErrors').html('');
										$('#card-button').attr("data-secret", data);
										$('#selectBillingButton').click();
									 },
									error: function(jqXHR, textStatus, errorThrown){
										$('#billingErrors').html('<div class="sb-msg"><i class="icon-remove"></i><strong>Oh snap!</strong> Check your information and try submitting again.</div>');
										console.log('jqXHR:');
										console.log(jqXHR);
										console.log('textStatus:');
										console.log(textStatus);
										console.log('errorThrown:');
										console.log(errorThrown);
									}
								});
							});
						</script>
					</div>
					<div id="ptab3">
						<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Reiciendis, sit, culpa, placeat, tempora quibusdam molestiae cupiditate atque tempore nemo tenetur facere voluptates autem aliquid provident distinctio beatae odio maxime pariatur eos ratione quae itaque quod. Distinctio, temporibus, cupiditate, eaque vero illo molestiae vel doloremque dolorum repellat ullam possimus modi dicta eum debitis ratione est in sunt et corrupti adipisci quibusdam praesentium optio laborum tempora ipsam aut cum consectetur veritatis dolorem.</p>
						<form>
							<label>
								<input name="cardholder-name" class="field is-empty" placeholder="Jane Doe"/>
								<span><span>Name</span></span>
							</label>
							<label>
								<input class="field is-empty" type="tel" placeholder="01234 567890"/>
								<span><span>Phone number</span></span>
							</label>
							<label>
								<div id="card-element" class="field is-empty"></div>
								<span><span>Credit or debit card</span></span>
							</label>
							<button type="submit">Pay $25</button>
							<div class="outcome">
								<div class="error" role="alert"></div>
								<div class="success">
									Success! Your Stripe token is <span class="token"></span>
								</div>
							</div>
						</form>

						<div class="line"></div>
						<a href="#" class="button button-3d nomargin tab-linker" rel="2">Previous</a>
						<a href="#" class="button button-3d nomargin fright tab-linker" rel="4">Complete Order</a>

						<script>
							var stripe = Stripe('{{ public_api_key }}');
							var elements = stripe.elements();

							var card = elements.create('card', {
							  iconStyle: 'solid',
							  style: {
								base: {
								  iconColor: '#8898AA',
								  color: 'white',
								  lineHeight: '36px',
								  fontWeight: 300,
								  fontFamily: '"Helvetica Neue", Helvetica, sans-serif',
								  fontSize: '19px',

								  '::placeholder': {
									color: '#8898AA',
								  },
								},
								invalid: {
								  iconColor: '#e85746',
								  color: '#e85746',
								}
							  },
							  classes: {
								focus: 'is-focused',
								empty: 'is-empty',
							  },
							});
							card.mount('#card-element');

							var inputs = document.querySelectorAll('input.field');
							Array.prototype.forEach.call(inputs, function(input) {
							  input.addEventListener('focus', function() {
								input.classList.add('is-focused');
							  });
							  input.addEventListener('blur', function() {
								input.classList.remove('is-focused');
							  });
							  input.addEventListener('keyup', function() {
								if (input.value.length === 0) {
								  input.classList.add('is-empty');
								} else {
								  input.classList.remove('is-empty');
								}
							  });
							});

							function setOutcome(result) {
							  var successElement = document.querySelector('.success');
							  var errorElement = document.querySelector('.error');
							  successElement.classList.remove('visible');
							  errorElement.classList.remove('visible');

							  if (result.token) {
								// Use the token to create a charge or a customer
								// https://stripe.com/docs/charges
								successElement.querySelector('.token').textContent = result.token.id;
								successElement.classList.add('visible');
							  } else if (result.error) {
								errorElement.textContent = result.error.message;
								errorElement.classList.add('visible');
							  }
							}

							card.on('change', function(event) {
							  setOutcome(event);
							});

							document.querySelector('form').addEventListener('submit', function(e) {
							  e.preventDefault();
							  var form = document.querySelector('form');
							  var extraDetails = {
								name: form.querySelector('input[name=cardholder-name]').value,
							  };
							  stripe.createToken(card, extraDetails).then(setOutcome);
							});
						</script>
					</div>
					<div id="ptab4">
						<div class="alert alert-success">
							<strong>Thank You.</strong> Your order will be processed once we verify the Payment.
						</div>
					</div>
				</div>
			</div>

			<div class="clear"></div>

			<div class="divider divider-center"><i class="icon-circle"></i></div>

		</div>

	</div>



	<script>
		$(function() {
			$( "#processTabs" ).tabs({ show: { effect: "fade", duration: 400 } });
			$( ".tab-linker" ).click(function() {
				$( "#processTabs" ).tabs("option", "active", $(this).attr('rel') - 1);
				return false;
			});
		});
	</script>
{% endblock %}
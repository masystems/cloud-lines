{% load static %}

<form class="form-horizontal form-material" action="{% url 'cl_login' %}" method="POST" id="loginform">
    {% csrf_token %}
    <h3 class="box-title mb-3">Sign In</h3>
    <div class="form-group ">
        <div class="col-xs-12">
            <input class="form-control" type="text" required="" name="username" placeholder="Username"> </div>
    </div>
    <div class="form-group">
        <div class="col-xs-12">
            <input class="form-control" id="passwordInput" type="password" required="" name="password" placeholder="Password"> </div>
    </div>
    <div class="form-group">
        <div class="col-xs-12">
            <input type="checkbox" onclick="showPassword()"> Show Password
        </div>
    </div>
    <div class="form-group">
        <div class="col-md-12">
            <div class="checkbox checkbox-primary float-left pt-0">
                <input id="checkbox-signup" type="checkbox">
                <label for="checkbox-signup"> Remember me </label>
            </div> <a href="{% url 'password_reset' %}" id="to-recover" class="text-dark float-end"><i class="fa fa-lock mr-1"></i> Forgot password?</a> 
        </div>
    </div>
    
    <!-- GDPR checkboxes -->
    {% if privacy_needed or data_protection_needed %}
        <div class="mb-2">
            {% if privacy_needed %}
                <div class="checkbox checkbox-success col-12">
                    <input id="privacy" name="privacy" type="checkbox" required>
                    <label for="privacy" for="checkbox" class="mx-1">I agree with the <a href="{% static 'docs/MA Systems Ltd Privacy Notice v2.0.docx' %}">Privacy Policy</a></label>
                </div>
            {% endif %}
            {% if data_protection_needed %}
                <div class="checkbox checkbox-success col-12">
                    <input id="data_protection" name="data_protection" type="checkbox" required>
                    <label for="data_protection" for="checkbox" class="mx-1">I agree with the <a href="{% static 'docs/MA Systems Ltd - Data Processing Agreement v2.1.docx' %}">Data Processing Agreement</a></label>
                </div>
            {% endif %}
        </div>
    {% endif %}
    
    {% if error %}
        <div class="style-msg errormsg">
            <div class="text-danger"><strong>Oh snap!</strong> {{ error }}</div>
        </div>
    {% endif %}
    <div class="form-group text-center mt-3">
        <div class="col-xs-12">
            <button id="loginBtn" class="btn btn-info btn-lg btn-block text-uppercase waves-effect waves-light" type="submit">Log In</button>
        </div>
    </div>

    <div class="form-group mb-0">
        <div class="col-sm-12 text-center">
            <p>Don't have an account? <a href="https://cloud-lines.com/contact" class="text-info mx-1"><b>Contact Us</b></a></p>
        </div>
    </div>
</form>

<script>
function showPassword() {
  var x = document.getElementById("passwordInput");
  if (x.type === "password") {
    x.type = "text";
  } else {
    x.type = "password";
  }
}
</script>
